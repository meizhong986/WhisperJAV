# WhisperJAV v1.7.3 Dependency Constraints
# ========================================
#
# These constraints prevent ML packages from downgrading core packages
# or reinstalling CPU-only PyTorch during installation.
#
# Usage: pip install -c constraints_v1.7.3.txt -r requirements_v1.7.3.txt
#
# WHY THIS FILE EXISTS:
# Some ML packages have loose dependency specifications that can cause
# pip to reinstall CPU-only PyTorch. This constraints file prevents that.
#
# FOR UPGRADE USERS:
# When upgrading from a previous version, pip will NOT reinstall packages
# that already satisfy these constraints. Your CUDA-enabled PyTorch will
# be preserved.

# ----------------------------------------
# Core Scientific Packages - DO NOT DOWNGRADE
# ----------------------------------------
# NumPy 2.x is required - modelscope/zipenhancer are compatible
numpy>=2.0
scipy>=1.10.1

# ----------------------------------------
# PyTorch Stack - INSTALLED SEPARATELY
# ----------------------------------------
# PyTorch is installed in Phase 3 with CUDA detection.
# These constraints prevent pip from reinstalling CPU-only torch.
# The actual version will be set dynamically based on detected CUDA.
torch>=2.0.0
torchaudio>=2.0.0

# ----------------------------------------
# HuggingFace Ecosystem
# ----------------------------------------
# Need recent versions for model loading and caching
transformers>=4.40.0
accelerate>=0.26.0
huggingface-hub>=0.25.0
datasets>=2.14.0

# ----------------------------------------
# Configuration System
# ----------------------------------------
# Pydantic v2 required for config schemas
pydantic>=2.0,<3.0
PyYAML>=6.0

# ----------------------------------------
# Audio Processing
# ----------------------------------------
librosa==0.10.2.post1  # Pinned for clearvoice compatibility
soundfile>=0.12.0

# ----------------------------------------
# Speech Enhancement Dependencies
# ----------------------------------------
# modelscope works with latest versions
modelscope>=1.20
