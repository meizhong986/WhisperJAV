================================================================================
AUDIO ANALYSIS SUMMARY FOR SCENE DETECTION TUNING
================================================================================

Analysis Date: 2025-12-06
Files Analyzed: 2
Script Location: C:\BIN\git\whisperJav_V1_Minami_Edition\analyze_audio_scene_detection.py

================================================================================
FILE COMPARISON
================================================================================

File 1: short_15_sec_test-966-00_01_45-00_01_59.wav
  Duration:        14.02s
  Mean Energy:     -24.81 dB (NORMAL/LOUD)
  Dynamic Range:   20.26 dB
  Peak:            -9.98 dB
  Primary Range:   -30 to -18 dB

File 2: MIAA-432.5sec.wav
  Duration:        6.00s
  Mean Energy:     -49.20 dB (VERY QUIET)
  Dynamic Range:   31.56 dB
  Peak:            -25.22 dB
  Primary Range:   -57 to -36 dB

Energy Difference: 24.39 dB (File 2 is MUCH quieter)

================================================================================
CRITICAL FINDING: AUDITOK THRESHOLD INTERPRETATION
================================================================================

Auditok's energy_threshold does NOT directly map to dB levels!

Instead:
- It's a RELATIVE threshold (energy ratio or SNR-based)
- Higher values = MORE SENSITIVE (detects more speech)
- Lower values = LESS SENSITIVE (only strong speech)
- Typical range: 30-55 for speech detection

Current WhisperJAV settings:
- Aggressive:  pass1=20, pass2=28  (too conservative?)
- Balanced:    pass1=32, pass2=38  (reasonable default)
- Conservative: NOT DEFINED

================================================================================
RECOMMENDED THRESHOLD UPDATES
================================================================================

Proposed Configuration:

Sensitivity    Pass 1 (Coarse)    Pass 2 (Fine)    Use Case
-----------    ---------------    -------------    --------------------------
Aggressive     28                 32               Max scene detection
Balanced       35                 40               Recommended default
Conservative   42                 47               Minimize false splits

Strategy:
- Pass 1 (lower threshold) = coarse splitting, catches major boundaries
- Pass 2 (higher threshold) = fine-grained detection, catches subtle pauses

================================================================================
CURRENT vs PROPOSED COMPARISON
================================================================================

CURRENT (asr_config.json):
  aggressive:  { pass1: 20, pass2: 28 }  <- Too conservative
  balanced:    { pass1: 32, pass2: 38 }  <- OK, could bump slightly

PROPOSED:
  aggressive:  { pass1: 28, pass2: 32 }  <- More aggressive
  balanced:    { pass1: 35, pass2: 40 }  <- Slightly more sensitive
  conservative:{ pass1: 42, pass2: 47 }  <- NEW profile

================================================================================
ENERGY PERCENTILE REFERENCE (File 1 - Normal Audio)
================================================================================

Percentile    Energy (dB)    Interpretation
----------    -----------    --------------
1%            -29.52         Ultra-quiet moments
10%           -28.07         Quiet pauses (90% above this)
25%           -26.48         Soft speech (75% above this)
50%           -24.89         Median energy
75%           -23.09         Normal speech
90%           -21.55         Loud speech
99%           -19.70         Peak moments

================================================================================
ENERGY PERCENTILE REFERENCE (File 2 - Quiet Audio)
================================================================================

Percentile    Energy (dB)    Interpretation
----------    -----------    --------------
1%            -55.47         Ultra-quiet moments
10%           -53.53         Quiet pauses (90% above this)
25%           -52.56         Soft speech (75% above this)
50%           -50.61         Median energy
75%           -46.46         Normal speech
90%           -43.16         Loud speech
99%           -37.03         Peak moments

================================================================================
NEXT STEPS
================================================================================

1. TEST proposed thresholds on diverse JAV content:
   - Dialogue-heavy scenes
   - Quiet/moaning scenes
   - Mixed content (dialogue + music)
   - Background noise variations

2. MEASURE these metrics:
   - Scene count (should be reasonable, not excessive)
   - Average scene duration (target: 15-20 seconds)
   - False positives (over-splitting continuous speech)
   - False negatives (missing actual scene boundaries)

3. VALIDATE scene quality:
   - Natural dialogue breaks preserved
   - Music doesn't cause false splits
   - Scenes are meaningful units for ASR

4. TUNE based on results:
   - Adjust thresholds if needed
   - Document any audio-specific patterns
   - Update configuration files

================================================================================
CONFIGURATION FILE LOCATIONS
================================================================================

Primary Config:
  C:\BIN\git\whisperJav_V1_Minami_Edition\whisperjav\config\asr_config.json

Scene Detector:
  C:\BIN\git\whisperJav_V1_Minami_Edition\whisperjav\modules\scene_detection.py

V4 Components:
  C:\BIN\git\whisperJav_V1_Minami_Edition\whisperjav\config\components\features\scene_detection.py

================================================================================
ANALYSIS SCRIPT USAGE
================================================================================

To re-run analysis:
  cd C:\BIN\git\whisperJav_V1_Minami_Edition
  python analyze_audio_scene_detection.py

To analyze new files, edit the 'files' list in main():
  files = [
      r"C:\path\to\your\audio.wav",
      r"C:\another\audio.wav"
  ]

================================================================================
DETAILED REPORT
================================================================================

Full analysis report with technical details:
  C:\BIN\git\whisperJav_V1_Minami_Edition\AUDIO_ANALYSIS_REPORT.md

================================================================================
